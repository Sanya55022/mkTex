                                      2
                        4605731.16197 - 01 31 01 MVN



                              А_Н_Н_О_Т_А_Ц_И_Я
     
     
          Данный документ содержит описание документатора RIO,  который
     предназначен для форматирования текстов. Документатор позволяет  в
     частности, готовить документацию  в  соответствии  с  требованиями
     ЕСПД, СПДС  и  ЕСКД,  и  может  эксплуатироваться  в  операционных
     системах UNIX, RSX-11М и MS-DOS.
     
          Основное  внимание  уделено  описанию  команд  документатора.
     Изложение иллюстрируется примерами.

                                      4
                        4605731.16197 - 01 31 01 MVN


           1.  Общие сведения и используемые технические средства


     Обозначение программы: 4605731.16197 - 01.

     Наименование программы: документатор RIO.

     Документатор RIO может применяться на ЭВМ СМ_4, СМ_1420,  СМ_1600,  IBM
PC XT/AT в операционных системах UNIX, RSX-11М и MS-DOS.

     Поскольку операционные системы, подобные  UNIX,  в  принципе  мобильны,
возможно применение документатора RIO и  на  других  типах  ЭВМ,  оснащенных
такими системами, или хотя бы компилятором языка СИ, в частности, на ЕС ЭВМ,
ROBOTRON-1715, ИСКРА-1030 и т.д.

     Для  функционирования  документатора  RIO  необходим  базовый  комплект
внешних устройств.

     К числу отечественных операционных систем, основанных на системе  UNIX,
относятся следующие системы:

     - ИНМОС;

     - ДЕМОС;

     - УНИКС-226.

     К числу отечественных операционных систем, основанных на  системе  RSX,
относятся все версии системы ОС РВ.

     В дальнейшем, говоря о системе UNIX, мы будем иметь  в  виду  семейство
операционных систем, прототипом которых является UNIX. То же относится  и  к
системе RSX-11M.

     Документатор RIO написан на языке СИ.

                                      5
                        4605731.16197 - 01 31 01 MVN


                        2.  Функциональное назначение


     Документатор RIO предназначен для форматирования  текста  и,  возможно,
размещения его на бланке.

     В базовом комплекте находятся бланки (см. приложения) соответствующие:

     - ГОСТ 19.106-78 единой системы программной документации (ЕСПД);

     - ГОСТ 2.004-79 единой системы конструкторской документации (ЕСКД);

     - ГОСТ  21.103-78  системы  проектной  документации  для  строительства
(СПДС).

                                      6
                        4605731.16197 - 01 31 01 MVN


                           3.  Вызов документатора


     Вызов на выполнение документатора RIO осуществляется командой:

         RIO [+начало] [-конец] [команда...] [-Iфайл] <вход >выход.

     Опции означают:
             
-p         - вывод производится без разбивки на страницы;
             
+начало    - выводятся  страницы  текста,  начиная  со  страницы  с  номером
             'начало' (по умолчанию - с первой);
             
-конец     - выводятся страницы текста, вплоть до страницы с номером 'конец'
             (по умолчанию - до конца текста);
             
команда... - набор   любых   команд   документатора   в   обычном    формате
             (<точка><имя_команды>    <тело_команды>).    Команды     должны
             разделяться пробелом или табуляцией.
             
                  Примечания:
             
                  1) Если  в  теле  команды  (в  командной   строке)   нужно
             использовать комбинацию ' .' (пробел+точка), точка должна  быть
             значащей: ' \.'.
             
                  2) Если, при  работе  в  RSX-11М,  в  теле  команды  нужно
             использовать русские литеры, то  необходимо  установить  задачу
             RIO и заключить русские слова в двойные (") кавычки.
             
-Iфайл     - Индексы будут выводиться в файл,  имя  которого  следует  сразу
             после опции -I. При этом будет игнорироваться имя, задаваемое в
             команде .I .

     Примеры:

RIO -? или RIO /HELP или RIO помоги! и т.д.
     приведут к выводу подсказки о формате вызова;

RIO +3 -60 .% 2 .* FORMAT.A4 .D AA "цена" \.5 "тыс"
     Печатать страницы с 3 по  60  включительно,  номер  первой  страницы  3
     (текущей - 2!!!), выводить на  бланк,  который  содержится  в  файле  с
     именем FORMAT.A4, макропеременная 'AA' получит значение 'цена .5  тыс',
     ввод и вывод связаны с терминалом;

RIO <D31.RIO >D31.DOC
     вызов RIO для форматирования данной документации.

                                      7
                        4605731.16197 - 01 31 01 MVN


                        4.  Входные и выходные данные


     Входные  данные  документатора  -  это   исходный   текст,   подлежащий
форматированию.  Исходный  текст  состоит  из  обычных   строк,   содержащих
собственно  текст  документа,  и  управляющих  строк,   содержащих   команды
форматирования. Управляющие строки отличаются от обычных тем, что содержат в
первой колонке управляющий символ точку.

     За управляющим  символом  следует  односимвольное  имя  команды.  имена
команд это - малые латинские буквы, цифры и специальные знаки. Команды могут
иметь аргументы, которые разделяются между собой пробелами.

     Обычные строки могут  быть  переменной  длины.  Рекомендуем  делать  их
короткими, т.к. короткие строки легче редактировать. Удобно  также  начинать
новую строку после точки или запятой, т.к. чаще всего корректировка  состоит
в замене или удалении предложений и оборотов.

     Если не установлен режим автопараграфа (см. команду  .A),  то  пробелы,
символы табуляции и пустые строки  рассматриваются  только  как  разделители
слов.

     При подготовке исходного текста необходимо помнить следующее:

     1) аргументы  команд  представляют  собой   либо   символьные   строки,
например, заголовок раздела, либо числа, например, номер страницы.

     2) аргументы-строки, как и  рядовые  строки,  допускают  продолжение  с
помощью символа обратной косой  черты  '\'  (суммарная  длина  строки  и  ее
продолжений не должна превышать 400 символов, а длина самой  входной  строки
не должна превышать 200 символов.

     3) аргументы-числа задают безразмерные величины,  например,  количество
пропускаемых строк.

     4) для того, чтобы строка, начинающаяся с точки, не воспринималась  как
команда, следует начинать ее со "значащей точки", которая представляет собой
последовательность - обратная косая черта и точка.

     5) если необходимо в текст включить пробелы, которые воспринимались  бы
программой RIO как символы, а не как разделители слов, следует  заменять  их
"значащим пробелом" - обратная косая черта и пробел.

     6) если необходимо включить в текст сам символ обратной косой черты, то
его следует удваивать.

     7) в тексте могут находиться символы с кодами от 3 до 31, кроме символа
конца файла MS-DOS (^Z), имеющего код 26.

     8) все команды RIO вызывают разрыв форматирования.

     Выходные данные представляют собой отформатированный текст.

                                      8
                        4605731.16197 - 01 31 01 MVN


                               5.  Команды RIO


     Описания команд  имеют  стандартный  формат.  описание  каждой  команды
состоит по крайней мере из трех секций:
                  
И_м_я           - приводится имя команды и ее назначение;
                  
Ф_о_р_м_а_т     - приводится  формат  команды.  аргументы-символьные  строки
                  обозначаются "STRING". Аргументы-числа  обозначаются  "N".
                  Квадратные скобки означают, что заключенный в них аргумент
                  не является обязательным;
                  
О_п_и_с_а_н_и_е - приводится  описание  действий,  выполняемых  командой,  и
                  смысл ее аргументов.

Может присутствовать, также, секция З_а_м_е_ч_а_н_и_я, в которой описываются
условия применения команды и побочные эффекты от ее выполнения.
     
     
     5.1.  Базовые команды

И_м_я
     .S - установить размер страницы

Ф_о_р_м_а_т
     .S N1 N2

О_п_и_с_а_н_и_е
     устанавливается количество строк на листе - N1.
устанавливается ширина листа - N2 символов.
ширина листа не должна превышать 132 символов.

З_а_м_е_ч_а_н_и_я
     команда допустима только если не установлен режим вывода на бланк  (см.
     команду .*).

И_м_я
     .PB - установить количество пустых строк до поля номера страницы

Ф_о_р_м_а_т
     .PB N

О_п_и_с_а_н_и_е
     устанавливается N пустых строк, выводимых перед полем номера страницы.

З_а_м_е_ч_а_н_и_я
     команда допустима только если не установлен режим вывода на бланк  (см.
     команду .*).

И_м_я
     .PA - установить количество пустых строк после верхнего колонтитула

Ф_о_р_м_а_т
     .PA N

О_п_и_с_а_н_и_е
     устанавливается N пустых строк, выводимых после  верхнего  колонтитула.
     Заметим, что верхний колонтитул следует непосредственно за полем номера
     страницы.

З_а_м_е_ч_а_н_и_я
     команда допустима только если не установлен режим вывода на бланк  (см.
     команду .*).

И_м_я
     .HB - установить количество пустых строк до заголовка

Ф_о_р_м_а_т
     .HB PAIR1 PAIR2 ... PAIR10
     
     где PAIRi имеет вид: Hi N либо Hi-Hj N. Числа Hi,  Hj  могут  принимать
                                      9
                        4605731.16197 - 01 31 01 MVN

     значения от 0 до 9, они обозначают соответствующие  уровни  заголовков.
     Диапазон уровней заголовков задается через дефис.  Число  N  обозначает
     количество пустых строк, выводимых до заголовка заданного уровня.

О_п_и_с_а_н_и_е
     устанавливается   заданное   число   пустых   строк,    выводимых    до
     соответствующих заголовков. Команда имеет переменное число аргументов.

З_а_м_е_ч_а_н_и_я
     команда допустима только если не установлен режим вывода на бланк  (см.
     команду .*).

И_м_я
     .HA - установить количество пустых строк после заголовка

Ф_о_р_м_а_т
     .HA PAIR1 PAIR2 ... PAIR10
     
     где PAIRi имеет вид: Hi N либо Hi-Hj N. Числа Hi,  Hj  могут  принимать
     значения от 0 до 9, они обозначают соответствующие  уровни  заголовков.
     Диапазон уровней заголовков задается через дефис.  Число  N  обозначает
     количество пустых строк, выводимых после заголовка заданного уровня.

О_п_и_с_а_н_и_е
     устанавливается  заданное   число   пустых   строк,   выводимых   после
     соответствующих заголовков. Команда имеет переменное число аргументов.

З_а_м_е_ч_а_н_и_я
     команда допустима только если не установлен режим вывода на бланк  (см.
     команду .*).

И_м_я
     .F - установить режим форматирования

Ф_о_р_м_а_т
     .F

О_п_и_с_а_н_и_е
     устанавливается режим форматирования текста: наполнение,  выравнивание,
     перенос. Этот режим  устанавливается  по  умолчанию  и,  следовательно,
     команда нужна только для отмены режима без форматирования (команда .N).

З_а_м_е_ч_а_н_и_я
     переносятся слова содержащие только русские строчные буквы и  дефис.  В
     начале и в конце (но не внутри!) слова допускаются знаки пунктуации.

И_м_я
     .N - отменить режим форматирования

Ф_о_р_м_а_т
     .N

О_п_и_с_а_н_и_е
     отменяется режим  форматирования  текста.  Строки  входного  файла,  не
     являющиеся  командами,  переносятся  в  выходной  файл  без   изменений
     (макроподстановка и продолжение строк выполняются).

З_а_м_е_ч_а_н_и_я
     не обрабатываются команды, связанные с форматированием текста  (абзацы,
     пояснения, центрирование и т.д.).

И_м_я
     ._ - установить обозначение документа

Ф_о_р_м_а_т
     ._ [STRING]

О_п_и_с_а_н_и_е
     устанавливается обозначение документа. Позиция обозначения определяется
     символом '@' в описании бланка (см. команду .*).
     если не установлен режим вывода  на  бланк,  то  обозначение  документа
     выводится как колонтитул (аналогично гост ЕСПД).
     аргумент определяет  обозначение  документа,  которое  запоминается  во
                                     10
                        4605731.16197 - 01 31 01 MVN

     внутренней макропеременной @_. При  отсутствии  аргумента  этой  строке
     присваивается пустое значение.

И_м_я
     .a - изменить режим автопараграфа

Ф_о_р_м_а_т
     .a

О_п_и_с_а_н_и_е
     запретить автопараграф, если он разрешен,  и  установить  автопараграф,
     если он запрещен.
     Режим  автопараграфа  означает,  что  строка,  начинающаяся  с  символа
     пробела или табуляции, начинает новый абзац (аналогично .^).

З_а_м_е_ч_а_н_и_я
     все, сказанное выше, имеет место только в режиме форматирования.
     По умолчанию автопараграф запрещен.

И_м_я
     .H - изменить режим переноса

Ф_о_р_м_а_т
     .H

О_п_и_с_а_н_и_е
     запретить переносы, если они разрешены, и разрешить переносы, если  они
     запрещены.
     По умолчанию переносы разрешены.

И_м_я
     .; - комментарий

Ф_о_р_м_а_т
     .; [STRING]

О_п_и_с_а_н_и_е
     аргумент STRING не  попадает  в  выходной  текст  и  выводится  в  файл
     стандартного вывода ошибок (сообщений). Команда может быть использована
     для организации диалога с пользователем.
     
     
     5.2.  Управление страницами

И_м_я
     .P - перейти на новую страницу

Ф_о_р_м_а_т
     .P [N]

О_п_и_с_а_н_и_е
     если команда .P без аргумента встретилась в  начале  страницы,  никаких
     действий не производится. В противном случае  (не  в  начале  страницы)
     производится переход на новую страницу.
     Если указан аргумент N и количество свободных строк на текущей странице
     меньше N, то выполняется переход на новую страницу, иначе - ничего.

И_м_я
     .% - установить номер текущей страницы

Ф_о_р_м_а_т
     .% STRING

О_п_и_с_а_н_и_е
     аргумент принимает одно из трех значений: минус, плюс или число.
     Минус  означает:  отменить  печать  номеров   страниц   и   обозначения
     документа.
     Плюс  означает:  восстановить  печать  номеров  страниц  и  обозначения
     документа.
     Число означает: текущая страница получит  номер  N.  Дальнейшие  номера
     страниц будут N+1, N+2, и т.д.


                                     11
                        4605731.16197 - 01 31 01 MVN

З_а_м_е_ч_а_н_и_я
     Действие команды .%  проявится  только  на  следующей  странице  (номер
     станет на единицу больше!). Поэтому .% нужно давать заблаговременно.
     Поскольку по умолчанию печать номеров страниц и  обозначения  документа
     включена (номер страницы - 1),  команда  .%  с  аргументом  плюс  нужна
     только для отмены действия команды .% с аргументом минус.
     
     
     5.3.  Рубрикация

     Как правило, документ состоит из отдельных рубрик, таких,  как  раздел,
подраздел, пункт. Каждой  рубрике  сопоставлено  число,  называемое  уровнем
рубрики, а именно:

     1 - раздел;

     2 - подраздел;

     3 - пункт.

     Таким образом, раздел - это рубрика 1-го уровня,  подраздел  -  рубрика
2-го уровня и пункт - рубрика 3-го уровня.

     Рубрики имеют номера (в общем случае  составные,  например,  1.3.2.)  и
могут иметь заголовки (раздел обязан иметь заголовок).

     Номера  рубрик  хранятся  во  внутренних  макропеременных  @1,  @2,  @3
(раздел, подраздел, пункт соответственно).

     Документатор RIO поддерживает следующий стиль оформления рубрик:
       
     - рубрики 1-го уровня начинаются с новой  страницы.  Заголовок  рубрики
       центрируется.
       
     - остальные  рубрики  продолжаются  на  текущей   странице.   Заголовок
       выравнивается по левому краю.

И_м_я
     .1 - рубрика. Уровень=1
     .2 - рубрика. Уровень=2
     .3 - рубрика. Уровень=3
     .0 - ненумеруемая рубрика

Ф_о_р_м_а_т
     .1 STRING
     .2 [STRING]
     .3 [STRING]
     .0 STRING

О_п_и_с_а_н_и_е
     Начинается новая рубрика. Печатается либо заголовок с составным номером
     (при наличии аргумента  STRING),  либо  составной  номер  (в  противном
     случае).

З_а_м_е_ч_а_н_и_я
     При переходе к новой  рубрике  уровень  рубрики  не  может  увеличиться
     более, чем на 1. Команда .0 не  формирует  составного  номера  рубрики,
     однако стиль печати заголовка определяется в предположении, что уровень
     рубрики равен 1.

И_м_я
     .C - глава

Ф_о_р_м_а_т
     .C [STRING]

О_п_и_с_а_н_и_е
     Начинается очередная глава. Номер текущей главы находится во внутренней
     макропеременой @C. Глава начинается с новой страницы. В  центре  строки
     печатается слово глава и номер, а через строку  название  главы.  Главы
     нумеруются начиная с 1. Для изменения  начального  номера  главы  можно
     использовать команду:
     
                                     12
                        4605731.16197 - 01 31 01 MVN

                            .D @H нужный_номер_главы.
     
     Аналогично можно устанавливать номера рубрик всех уровней и нумеруемого
     приложения.
     
     
     5.4.  Вертикальные перемещения

     Под вертикальным перемещением  будем  понимать  разрыв  форматирования,
сопровождаемый,  вообще  говоря,  выводом  определенного  количества  пустых
строк.

И_м_я
     .B - пропуск строк

Ф_о_р_м_а_т
     .B [N]

О_п_и_с_а_н_и_е
     пропускается N строк. При положительном N  отсчет  ведется  от  текущей
     строки. При отрицательном N отсчет ведется  от  конца  страницы  вверх.
     Если аргумент опущен, подразумевается 0.

И_м_я
     .| - абзац без горизонтального отступа

Ф_о_р_м_а_т
     .|

О_п_и_с_а_н_и_е
     выводится пустая строка. Команда эквивалентна команде .B 1.
     
     
     5.5.  Горизонтальные перемещения

И_м_я
     .L - установить левое поле

Ф_о_р_м_а_т
     .L [[+-]N]

О_п_и_с_а_н_и_е
     левое поле устанавливается равным N. Левое поле должно быть  не  больше
     правого поля и не меньше 0. Если N опущено, принимается N = 0.
     Если указан знак '+', то левое поле увеличивается на N.
     Если указан знак '-', то левое поле уменьшается на N.
     Текущее значение левого поля находится  во  внутренней  макропеременной
     @L.

И_м_я
     .R - установить правое поле

Ф_о_р_м_а_т
     .R [[+-]N]

О_п_и_с_а_н_и_е
     правое поле устанавливается равным N. Правое поле должно быть не меньше
     левого  поля  и  не   больше   правого   края   страницы   и   выдается
     предупреждение. Если N  опущено,  то  правое  поле  принимается  равным
     правому краю страницы.
     Если указан знак '+', то правое поле увеличивается на N.
     Если указан знак '-', то правое поле уменьшается на N.
     Текущее значение правого поля находится во  внутренней  макропеременной
     @R.

И_м_я
     .: - центрировать текст

Ф_о_р_м_а_т
     .: STRING

О_п_и_с_а_н_и_е
     Аргумент STRING центрируется между левым и правым полями.
                                     13
                        4605731.16197 - 01 31 01 MVN

З_а_м_е_ч_а_н_и_я
     Аргумент STRING допускает продолжения с помощью  экранирующего  символа
     '\', однако суммарная  длина  аргумента  должна  быть  меньше  разности
     правого и левого полей.
     
     
     5.6.  Индексация

     RIO допускает создание индексов вашего документа в отдельном файле. Для
этого служат две команды: .I и .X .

И_м_я
     .X - занести индекс в файл

Ф_о_р_м_а_т
     .X STRING

О_п_и_с_а_н_и_е
     Аргумент STRING помещается во временный файл вместе с  номером  текущей
     страницы.

И_м_я
     .I - создать отсортированный выводной файл индексов

Ф_о_р_м_а_т
     .I STRING

О_п_и_с_а_н_и_е
     Индексы,   накопленные    во    временном    файле,    сортируются    в
     лексикографическом порядке программой  SORT  (если  таковая  имеется  в
     системе),  которой  в   качестве   выходного   файла   задается   файл,
     определенный в командной строке (опция -I) или в строке STRING.

З_а_м_е_ч_а_н_и_я
     В любом случае временный файл уничтожается.
     
     
     5.7.  Подключение файлов

     RIO допускает вызов для форматирования нового файла непосредственно  из
текущего файла.

И_м_я
     .< - подключить файл

Ф_о_р_м_а_т
     .< STRING

О_п_и_с_а_н_и_е
     В качестве нового входного  текста  рассматривается  текст  файла,  имя
     которого задано аргументом  STRING.  После  окончания  обработки  этого
     файла продолжается обработка исходного файла.
     Подключаемый файл может сам содержать команду подключения файла.

З_а_м_е_ч_а_н_и_я
     Максимальная глубина вложенности команды - 5.
     
     
     5.8.  Макропеременные
Документатор RIO допускает макропеременные двух типов:
        
     a) макропеременные,  определяемые  программой  RIO,  которые  мы  будем
        называть внутренними;
        
     b) макропеременные,  определяемые  пользователем,  которые   мы   будем
        называть внешними.

     макропеременные определяются (или переопределяются)  командой  .D  (см.
ниже) и включаются в текст обращением \XX, где XX - имя макропеременной.

     Имя макропеременной должно быть обязательно двухсимвольным и  не  может
содержать точку, пробел или обратную косую черту.

                                     14
                        4605731.16197 - 01 31 01 MVN

     5.8.1.  Внутренние макропеременные

     Документатор RIO определяет 12 внутренних макропеременных:
       
@_   - обозначение документа;
       
@Y   - две последних цифры текущего года (из системной даты);
       
@M   - номер текущего месяца (из системной даты);
       
@D   - номер текущего дня месяца (из системной даты);
       
@P   - текущий номер страницы;
       
@L   - текущее значение левого поля;
       
@R   - текущее значение правого поля;
       
@C   - текущий номер главы;
       
@1   - текущий номер раздела;
       
@2   - текущий номер подраздела;
       
@3   - текущий номер пункта;
       
@"   - текущий номер нумеруемого приложения.

     Переопределять можно только макропеременные @C, @1, @2, @3, @".
     
     5.8.2.  Внешние макропеременные

И_м_я
     .D - определить (переопределить) макропеременную

Ф_о_р_м_а_т
     .D XX [STRING]

О_п_и_с_а_н_и_е
     Определяется  (переопределяется)  макропеременная  с  именем   XX.   ее
     значением  становится  строка  STRING.  Если  аргумент  STRING  опущен,
     устанавливается пустое значение.

З_а_м_е_ч_а_н_и_я
     Имя макропеременной  не  может  содержать  символы  точка,  пробел  или
     обратная косая черта.
     
     
     5.9.  Фигуры

     Под фигурами будем понимать части текста, форматируемые особым образом.

     К фигурам относятся:

     - абзацы;

     - пояснения;

     - примечания;

     Относительно абзацев, пояснений и примечаний нужно сказать следующее:
       
     - горизонтальный отступ фигуры равен 5.
       
     - вертикальное расстояние между предшествующим текстом и фигурой  равно
       1 строке.
       
     - необходимое количество строк на странице для фигуры равно 2.

                                     15
                        4605731.16197 - 01 31 01 MVN

     5.9.1.  Абзацы

     абзацы бывают следующих типов:

     - простой абзац;

     - абзац с номером;

     - абзац с дефисом;

     - абзац с висячим индексом (цифровым или литерным);

     - абзац с висячим дефисом.

абзацы представлены на рисунке 1.


                                -------------

     Под фигурами мы будем понимать части текста (документа),  форматируемые
особым образом.

                                -------------

     1) Под  фигурами  мы   будем   понимать   части   текста   (документа),
форматируемые особым образом.

     2) Под  фигурами  мы   будем   понимать   части   текста   (документа),
форматируемые особым образом.

                                -------------

     - Под  фигурами   мы   будем   понимать   части   текста   (документа),
форматируемые особым образом.

                                -------------
        
     1) Под  фигурами  мы   будем   понимать   части   текста   (документа),
        форматируемые особым образом.
        
     2) Под  фигурами  мы   будем   понимать   части   текста   (документа),
        форматируемые особым образом.

                                -------------
        
     a) Под  фигурами  мы   будем   понимать   части   текста   (документа),
        форматируемые особым образом.
        
     b) Под  фигурами  мы   будем   понимать   части   текста   (документа),
        форматируемые особым образом.

                                -------------
       
     - Под  фигурами   мы   будем   понимать   части   текста   (документа),
       форматируемые особым образом.
                                -------------

                               Рис. 1. Абзацы


И_м_я
     .^ - простой абзац

Ф_о_р_м_а_т
     .^

И_м_я
     .( - абзац с номером (начало)
     .+ - абзац с номером (элемент)
     .) - абзац с номером (конец)

Ф_о_р_м_а_т
     .(
                                     16
                        4605731.16197 - 01 31 01 MVN

     .+
     .)

О_п_и_с_а_н_и_е
     Команда .( об'являет формирование абзацев с номером.
     Команда .+ формирует очередной абзац с номером, на  1  больше  текущего
     (начиная с номера 1).
     Команда .) оканчивает фигуру.

И_м_я
     .- - абзац с дефисом

Ф_о_р_м_а_т
     .-

И_м_я
     .[ - абзац с висячим индексом (начало)
     .# - абзац с висячим цифровым индексом (элемент)
     .@ - абзац с висячим литерным индексом (элемент)
     .] - абзац с висячим индексом (конец)

Ф_о_р_м_а_т
     .[
     .#
     .@
     .]

О_п_и_с_а_н_и_е
     Команда .[ об'являет формирование абзаца с индексом.
     Команда .# формирует очередной абзац с числовым индексом, на 1  большим
     текущего (начиная с номера 1).
     Команда .@ формирует очередной абзац  со  следующим  литерным  индексом
     (начиная с литеры A).
     Команда .] оканчивает фигуру.

З_а_м_е_ч_а_н_и_я
     Глубина вложенности этих фигур друг в друга должна быть разумной.
     В пределах каждого уровня вложенности ведется своя нумерация абзацев  и
     индексов.
     Литерный индекс ограничен диапазоном A-Z.

     Абзац с висячим  дефисом  реализуется  командой  группового  пояснения,
описанной в следующем пункте.
     
     5.9.2.  Пояснения

     Документатор RIO поддерживает пояснения двух типов:

     - Двухстрочное пояснение;

     - Групповое пояснение.

     Пояснения представлены на рисунке 2.


                                -------------

Поясняемое
     Поясняющий текст поясняющий текст  поясняющий  текст  поясняющий  текст
     поясняющий текст поясняющий текст поясняющий текст поясняющий текст
     
                                -------------
        
а     - Поясняющий текст поясняющий текст поясняющий текст поясняющий  текст
        поясняющий текст поясняющий текст поясняющий текст поясняющий текст
        
ABC   - Поясняющий текст поясняющий текст поясняющий текст поясняющий  текст
        поясняющий текст поясняющий текст поясняющий текст поясняющий текст
        
ABCDF - Поясняющий текст поясняющий текст поясняющий текст поясняющий  текст
        поясняющий текст поясняющий текст поясняющий текст поясняющий текст
                                -------------

                                     17
                        4605731.16197 - 01 31 01 MVN

                              Рис. 2. Пояснения


И_м_я
     .= - двухстрочное пояснение

Ф_о_р_м_а_т
     .= [STRING]

О_п_и_с_а_н_и_е
     Аргумент задает "поясняемое".  Поясняющий  текст  должен  следовать  за
     данной командой. Фигура оканчивается командой без аргумента.

И_м_я
     .{ - групповое пояснение (начало)
     .? - групповое пояснение (элемент)
     .} - групповое пояснение (конец)

Ф_о_р_м_а_т
     .{ [N]
     .? [STRING]
     .}

О_п_и_с_а_н_и_е
     Команда .{ начинает групповое пояснение  с  шириной  поясняемой  части,
     определяемой  аргументом  N.  При  отсутствии  этого  аргумента  ширина
     поясняемой части принимается равной 4.
     Команда .? задает элемент группового пояснения. аргумент STRING  задает
     "поясняемое".  Если  ширина  аргумента  превосходит  ширину  поясняемой
     части, фиксируется ошибка. Поясняющий текст должен следовать за  данной
     командой. В отсутствие  аргументов  N  и  STRING  формируется  абзац  с
     висячим дефисом.
     Команда .} оканчивает фигуру.

З_а_м_е_ч_а_н_и_я
     Вложенность этих фигур друг в друга не допускается.
     
     5.9.3.  Примечания
Документатор RIO допускает только одиночные примечания.

И_м_я
     .! - примечание

Ф_о_р_м_а_т
     .! [STRING]

О_п_и_с_а_н_и_е
     Начинается примечание. Центрируется аргумент или, если он опущен, слово
     "примечание". левое поле увеличивается на 5. Правое поле уменьшается на
     5. Делаются  соответствующие  вертикальные  отступы.  Текст  примечания
     должен следовать за данной командой.
     Повторная команда .! оканчивает примечание.
     Такая  команда  примечания  удобна,  хотя  и  не  вполне  соответствует
     требованиям ГОСТ. Примечания близкие к гост можно  получить,  например,
     так:
     
             .^ примечания:
             .(
             .+
             текст примечания 1
             .+
             текст примечания 2
             .)
     
     
     
     5.10. Приложения

     Приложения бывают двух типов:

     - одиночное приложение;

     - нумеруемое приложение.
                                     18
                        4605731.16197 - 01 31 01 MVN

     Каждое  приложение  начинается  с  новой  страницы,  в  начале  которой
печатается слово "приложение" в случае одиночного приложения  и  "приложение
N" в случае нумеруемого приложения (здесь N - номер приложения).

     Приложения могут иметь заголовки.

И_м_я
     .' - одиночное приложение

Ф_о_р_м_а_т
     .' [STRING]

О_п_и_с_а_н_и_е
     Начинается  одиночное  приложение.  Заголовок  приложения  определяется
     аргументом STRING.

И_м_я
     ." - нумеруемое приложение

Ф_о_р_м_а_т
     ." [STRING]

О_п_и_с_а_н_и_е
     Начинается  очередное  нумеруемое  приложение.   Заголовок   приложения
     определяется аргументом STRING. Номер текущего приложения находится  во
     внутренней макропеременной @".
     
     
     5.11. Содержание

И_м_я
     .$ - вывести содержание

Ф_о_р_м_а_т
     .$

О_п_и_с_а_н_и_е
     Формируется заголовок "содержание" и выводится содержание.

З_а_м_е_ч_а_н_и_я
     Выведенное содержание закрывается и начинается новое.

     Содержание может быть выведено только в конце документа, но,например, в
соответствии с еспд, оно должно находиться в начале документа. Поэтому,  для
правильной нумерации страниц документа необходимо воспользоваться  командами
управления страницами. Структура исходного текста документа представлена  на
рисунке 3.

     Необходимо учесть, что содержание должно выводится на бланке с  той  же
шириной поля текста, что и для основной части текста.

         .% 1
         ._  обозначение_документа
         .! аннотация
         текст
         аннотации.
         .!
         .% 3
         текст
         основной
         части
         документа.
         .< лист_регистрации
         .% -
         .* ESPD.T
         .< лист_утверждения
         .< титульный_лист
         .*
         .% 2
         .$

      Рис. 3. Структура исходного текста документа

                                     19
                        4605731.16197 - 01 31 01 MVN

     В этом примере предполагается следующее:

     - аннотация имеет номер страницы, равный 2  (страница  номер  1  -  это
титульный лист);

     - содержание размещается на двух страницах.

И_м_я
     .> - поместить текст в содержание

Ф_о_р_м_а_т
     .> STRING

О_п_и_с_а_н_и_е
     аргумент  STRING   помещается   в   содержание.   Номер   страницы   не
     проставляется.
     
     
     5.12. Форматирование с выводом на бланки

И_м_я
     .* - установить бланк

Ф_о_р_м_а_т
     .* [STRING]

О_п_и_с_а_н_и_е
     Если указан аргумент STRING, то в качестве  бланка  для  форматирования
     устанавливается файл с именем STRING.
     Команда  без  аргумента   восстанавливает   стандартное   состояние   -
     форматирование без бланка (соответствует требованиям ЕСПД).
     Текущий лист будет предварительно заполнен до конца.  для  немедленного
     перехода к новому бланку необходимо выполнить  команду  .P  (перед  или
     после команды .*).

З_а_м_е_ч_а_н_и_я
     Максимальная длина имени бланка  30  символов  (константа  LENFNAMES  в
     файле RIO.H).

     В состав комплекта бланков, поставляемых с документатором  RIO,  входят
(имя файла определяет ГОСТ):
          
ESPD.T  - бланк для размещения титульного листа и листа утверждения;
          
ESKD.T  - бланк для размещения титульного листа и листа утверждения;
          
ESKD.B  - бланк для размещения содержания (лист 1);
          
ESKD.   - бланк для размещения основного текста;
          
SPDS.T  - бланк для размещения титульного листа и листа утверждения;
          
SPDS.B  - бланк для размещения содержания (лист 1);
          
SPDS.   - бланк для размещения основного текста;

     При создании собственных бланков следует  учесть,  что  позиция  номера
строки (обозначения документа), переменная @P (@_), определяется символом  #
(@). При этом, если символ #  (@)  окружен  пробелами,  то  середина  номера
строки  (обозначения  документа)  будет  приходиться  на  символ  #  (@),  в
противном случае, заменяющий текст будет распространяться вправо, если слева
от символа # (@) не пробел, иначе влево.

     Выводимый на бланк текст будет  размещен  в  прямоугольнике  очерченном
звездочками (символ '*'), включая саму  рамку  из  звездочек.  Любой  текст,
находящийся вне рамки из звездочек, будет выведен  без  изменения,  а  текст
внутри рамки игнорируется.
В приложениях 3 - 6 приведены образцы основных бланков.

                                     20
                        4605731.16197 - 01 31 01 MVN


                           6.  Сообщения оператору


     Сообщения оператору имеют вид:

                  файл XXXXXX строка NNN - текст_сообщения

     Здесь XXXXXX - имя текущего входного файла, NNN - номер строки входного
файла.

     Если ошибка встретилась в команде, введенной в командной строке,  номер
входной строки текста равен 0.

     Имя базового входного файла (файл стандартного ввода) - STDIN.

     Сообщения  посылаются  в   стандартный   выводной   файл.   Этот   файл
ассоциирован с терминалом. В системе  UNIX  средствами  оболочки  этот  файл
можно переназначить.

                                     21
                        4605731.16197 - 01 31 01 MVN


                                                              APPENDIX 1 
                             Перечень команд RIO


 Имя               Значение                     Описание

 .A  ...... изменить режим автопараграфа......... 5.1.
 .B  ...... пропустить строки ................... 5.4.
 .C  ...... глава ............................... 5.3.
 .D  ...... определить макропеременную .......... 5.8.2.
 .F  ...... установить режим форматирования ..... 5.1.
 .H  ...... изменить режим переносов ............ 5.1.
 .HA ...... пространство после заголовков........ 5.1.
 .HB ...... пространство до заголовков........... 5.1.
 .I  ...... создать отсортированный файл индексов 5.6.
 .L  ...... установить левое поле ............... 5.5.
 .N  ...... отменить режим форматирования ....... 5.1.
 .P  ...... перейти на новую страницу ........... 5.2.
 .PA ...... пространство после колонтитула....... 5.1.
 .PB ...... пространство до поля страницы ....... 5.1.
 .R  ...... установить правое поле .............. 5.5.
 .S  ...... установить размеры листа ............ 5.1.
 .X  ...... занести индекс ...................... 5.5.
 ._  ...... установить обозначение документа .... 5.1.
 .%  ...... установить номер страницы ........... 5.2.
 .:  ...... центрировать текст .................. 5.5.
 .1  ...... рубрика. уровень=1 .................. 5.3.
 .2  ...... рубрика. уровень=2 .................. 5.3.
 . . .
 .9  ...... рубрика. уровень=9 .................. 5.3.
 .0  ...... ненумеруемая рубрика ................ 5.3.
 .'  ...... одиночное приложение ................ 5.10.
 ."  ...... нумеруемое приложение ............... 5.10.
 .>  ...... поместить в содержание .............. 5.11.
 .$  ...... вывести содержание .................. 5.11.
 .*  ...... установить бланк .................... 5.12.
 .^  ...... простой абзац ....................... 5.9.1.
 .|  ...... абзац без горизонтального отступа ... 5.4.
 .(  ...... абзац с номером (начало) ............ 5.9.1.
 .+  ...... абзац с номером (элемент) ........... 5.9.1.
 .)  ...... абзац с номером (конец) ............. 5.9.1.
 .-  ...... абзац с дефисом ..................... 5.9.1.
 .[  ...... абзац с висячим индексом (начало) ... 5.9.1.
 .#  ...... абзац с числовым индексом (элемент) . 5.9.1.
 .@  ...... абзац с литерным индексом (элемент) . 5.9.1.
 .]  ...... абзац с висячим индексом (конец) .... 5.9.1.
 .{  ...... групповое пояснение (начало) ........ 5.9.2.
 .?  ...... групповое пояснение (элемент) ....... 5.9.2.
 .}  ...... групповое пояснение (конец) ......... 5.9.2.
 .=  ...... двухстрочное пояснение .............. 5.9.2.
 .!  ...... примечание .......................... 5.9.3.
 .<  ...... подключить файл ..................... 5.7.
 .;  ...... комментарий ......................... 5.1.

                                     22
                        4605731.16197 - 01 31 01 MVN


                                                              APPENDIX 2 
                          Внутренние переменные RIO



     
@_ - обозначение документа;
     
@Y - две последних цифры текущего года (из системной даты);
     
@M - номер текущего месяца (из системной даты);
     
@D - номер текущего дня месяца (из системной даты);
     
@P - текущий номер страницы;
     
@L - текущее значение левого поля;
     
@R - текущее значение правого поля;
     
@C - текущий номер главы;
     
@1 - текущий номер раздела;
     
@2 - текущий номер подраздела;
     
@3 - текущий номер пункта;
     
@" - текущий номер нумеруемого приложения.





                                  CONTENTS
     
     
     
     1.  Общие сведения и используемые технические средства . . .    4
     2.  Функциональное назначение  . . . . . . . . . . . . . . .    5
     3.  Вызов документатора  . . . . . . . . . . . . . . . . . .    6
     4.  Входные и выходные данные  . . . . . . . . . . . . . . .    7
     5.  Команды RIO  . . . . . . . . . . . . . . . . . . . . . .    8
     5.1.  Базовые команды  . . . . . . . . . . . . . . . . . . .    8
     5.2.  Управление страницами  . . . . . . . . . . . . . . . .   10
     5.3.  Рубрикация . . . . . . . . . . . . . . . . . . . . . .   11
     5.4.  Вертикальные перемещения . . . . . . . . . . . . . . .   12
     5.5.  Горизонтальные перемещения . . . . . . . . . . . . . .   12
     5.6.  Индексация . . . . . . . . . . . . . . . . . . . . . .   13
     5.7.  Подключение файлов . . . . . . . . . . . . . . . . . .   13
     5.8.  Макропеременные  . . . . . . . . . . . . . . . . . . .   13
     5.8.1.  Внутренние макропеременные . . . . . . . . . . . . .   13
     5.8.2.  Внешние макропеременные  . . . . . . . . . . . . . .   14
     5.9.  Фигуры . . . . . . . . . . . . . . . . . . . . . . . .   14
     5.9.1.  Абзацы . . . . . . . . . . . . . . . . . . . . . . .   14
     5.9.2.  Пояснения  . . . . . . . . . . . . . . . . . . . . .   16
     5.9.3.  Примечания . . . . . . . . . . . . . . . . . . . . .   17
     5.10. Приложения . . . . . . . . . . . . . . . . . . . . . .   17
     5.11. Содержание . . . . . . . . . . . . . . . . . . . . . .   18
     5.12. Форматирование с выводом на бланки . . . . . . . . . .   19
     6.  Сообщения оператору  . . . . . . . . . . . . . . . . . .   20
     APPENDIX 1 Перечень команд RIO  . . . . . . . . . . . . .   21
     APPENDIX 2 Внутренние переменные RIO  . . . . . . . . . .   22
